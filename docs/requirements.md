# 项目需求文档

## 1. 项目目标

本项目旨在开发一个中间件程序，该程序通过串口连接一个蓝牙硬件模块。它接收来自上位机（如 PC）的指令，控制蓝牙模块扫描周围的蓝牙设备，并将扫描结果解析后实时上报给上位机。

## 2. 核心功能需求

- **串口通信**:
  - 程序必须能够监听指定的串口（例如 `/dev/ttyS3`）。
  - 能够接收和发送遵循指定协议（见 `communication-protocol.md`）的数据。

- **蓝牙模块控制**:
  - 程序需要能够通过发送 AT 指令来初始化和控制蓝牙模块。
  - 必须能够命令蓝牙模块进入"观察者模式"以开始扫描设备。
  - 必须能够关闭与模块的连接以停止扫描。

- **指令处理**:
  - **启动**: 响应上位机的启动指令，开始蓝牙扫描流程。
  - **心跳**: 响应上位机的心跳请求，报告自身运行状态。
  - **关闭**: 响应上位机的关闭指令，安全地终止扫描和程序运行。

- **数据上报**:
  - 程序需要解析蓝牙模块返回的原始广播数据。
  - 从广播数据中提取关键信息（如厂商信息等）。
  - 将解析后的设备信息，按照指定格式（见 `communication-protocol.md`）主动上报给上位机。
